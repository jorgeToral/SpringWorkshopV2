<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Spring Framework</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/moon.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<link rel="stylesheet" href="css/miEstilo.css" media="screen" title="no title">


	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
</head>

<body>
	<div class="reveal convex">
		<div class="slides">
			<section>
				<img alt="spring" src="img/spring-by-pivotal.png" height="200px" width="600px" class="no-frame">
				<h3>Spring Framework</h3>
				<p>
					<small>Created by <a href="">Team Darwin</a></small>
				</p>
			</section>

			<section>
				<section>
					<h1 class="anotation">@DynamicInsert</h1>
					<p>
						Excluye las propiedades con valor nulo en la instrucción SQL INSERT de HIBERNATE.
					</p>
				</section>
				<section>
					<pre>
						<code class="hljs" data-trim contenteditable style="max-height:600px">
    Cliente cliente = new Cliente();
    cliente.setNombre("Pedro");
    cliente.setApellidoPaterno("Garcia");
    cliente.setApellidoMaterno("Owen");
    cliente.setFechaNacimiento(fechaNacimiento);
					</code>
					<code class="hljs" data-trim contenteditable style="max-height:600px">
						INSERT INTO clientes(nombre,apellidoPaterno,apellidoMaterno,fechaNacimiento) VALUES(?,?,?,?);
				</code>
				</pre>
				</section>
			</section>

			<section>
				<section>
					<h1 class="anotation">@DynamicUpdate</h1>
					<p>
						Excluye las propiedades sin modificar en la sentencia de actualización SQL de HIBERNATE.
					</p>
				</section>
				<section>
					<pre>
						<code class="hljs" data-trim contenteditable style="max-height:600px">
			Cliente cliente = new Cliente();
			cliente.setNombre("Pedro");
			cliente.setApellidoPaterno("Garcia");
					</code>
					<code class="hljs" data-trim contenteditable style="max-height:600px">
						UPDATE clientes SET nombre=?,apellidoPaterno =? WHERE id=? ;
				</code>
				</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Entidad</h2>
					<p>
						Una entidad de persistencia (entity) es una clase de Java ligera, cuyo estado es persistido de manera asociada a una tabla en una base de datos relacional.
					</p>
				</section>
				<section>
					<h2 class="anotation">@Entity</h2>
					<img src="img/entiyes.png" alt="entities" />
				</section>
				<section>
					<p class="anotation">
						@Data
					</p>
					<p class="anotation">
						@Entity
					</p>
					<p class="anotation">
						@Table(name = "")
					</p>
					</p>
				</section>
				<section>
					<h1>Sin @Data</h1>
					<pre>
						<code class="hljs" data-trim contenteditable style="max-height:600px">

public class Auto {
int id;

String nombre;

String modelo;

String Color;

public Auto(int id, String nombre, String modelo, String color) {
 this.id = id;
 this.nombre = nombre;
 this.modelo = modelo;
 Color = color;
}

public int getId() {
  return id;
}

public void setId(int id) {
  this.id = id;
}

public String getNombre() {
  return nombre;
}

  public void setNombre(String nombre) {
    this.nombre = nombre;
 }

  public String getModelo() {
	    return modelo;
  }

  public void setModelo(String modelo) {
    this.modelo = modelo;
  }

  public String getColor() {
	    return Color;
  }

  public void setColor(String color) {
   Color = color;
  }

  @Override
  public boolean equals(Object o) {

	}

	  @Override
	  public int hashCode() {
	  ...
	  }
}
					</code>
				</pre>
				</section>
				<section>
					<h2 class="anotation">Con @Data</h2>
					<pre>
					<code class="hljs" data-trim  style="max-height:600px">
@Data
public class Auto {
  int id;

  String nombre;

  String modelo;

  String Color;
}
					</code>
				</pre>
				</section>
			</section>
			<section>
				<h2 class="anotation">@Transient</h2>
				<p>
					Se utiliza para indicar que un campo no debe ser persistido en el ENTITY, es decir, la propiedad no pertenece a un campo de la base de datos.
				</p>
			</section>
			<section>
				<section>
					<h2 class="anotation">Repository</h2>
					<img src="img/repository.png" alt="repository" />
				</section>
				<section>
					<h2 class="anotation">@RepositoryRestResource</h2>
					<p>
						exported = false/true
					</p>
					<p>
						path = "nombre"
					</p>
				</section>
			</section>

			<section id="querys">
				<h2 class="anotation">Querys</h2>
				<table>
					<tr>
						<th style="text-align: center;">Keyword</th>
						<th style="text-align: center;">Sample</th>
						<th style="text-align: center;">JPQL snippet</th>
					</tr>
					<tr>
						<td>And</td>
						<td>findByLastnameAndFirstname</td>
						<td>… where x.lastname = ?1 and x.firstname = ?2</td>
					</tr>
					<tr>
						<td>Between</td>
						<td>findByStartDateBetween</td>
						<td>… where x.startDate between ?1 and ?2</td>
					</tr>
					<tr>
						<td>LessThan</td>
						<td>findByAgeLessThan</td>
						<td>… where x.age
							< ?1</td>
					</tr>
					<tr>
						<td>After</td>
						<td>findByStartDateAfter</td>
						<td>… where x.startDate > ?1</td>
					</tr>
					<tr>
						<td>OrderBy</td>
						<td>findByAgeOrderByLastnameDesc</td>
						<td>… where x.age = ?1 order by x.lastname desc</td>
					</tr>
				</table>
			</section>

			<section id="fragments">
				<section>
					<h2 class="anotation">@Query</h2>
					<p>@Query("select u from User u where u.emailAddress = ?1")</p>
					<p class="fragment">User findByEmailAddress(String emailAddress)</p>
				</section>
			</section>

			<section id="fragments">
				<section>
					<h2 class="anotation">@RestController</h2>
					<img src="img/controller.png" alt="controller" />
				</section>
				<section>
					<pre>
						<code class="hljs" data-trim contenteditable style="max-height:600px">

	@RestController
	@RequestMapping(value = "api/series")
	public class SeriesController {

	  @Autowired
	  private SerieRepository serieRepository;

	  @Autowired
	  private Validator validator;

	  @Autowired
	  private SeriesApplication seriesApplication;

	  @RequestMapping(method = RequestMethod.POST, produces = "application/hal+json")
	  private Serie save(@RequestBody Serie serie) {

	    this.validator.isNotNull(serie, "serie no debe ser null");

	    return this.serieRepository.save(serie);
	  }

	}

					</code>
				</pre>
				</section>
				<section>
					<h3 class="anotation"></h3>
				</section>
			</section>

			<section>
				<section>
					<h2 class="anotation">@RequestMapping</h2>
					<p>
						La emplea Spring para conocer a que Controller o método de un Controller tiene que direccionar cada llamada del cliente.
					</p>
				</section>
				<section>
					<h3 class="anotation">method</h3>
					<h3 class="anotation">value</h3>
					<h3 class="anotation">produces</h3>
					<h3 class="anotation">consumes</h3>
					<p>
						@RequestMapping(method = RequestMethod.POST, value = "dispersion-stp", produces = "application/hal+json")
					</p>
				</section>
			</section>
			<section>
				<h3 class="anotation">@GetMapping</h3>
				<h3 class="anotation">@PostMapping</h3>
				<h3 class="anotation">@PutMapping</h3>
				<h3 class="anotation">@DeleteMapping</h3>
				<h3 class="anotation">@DeleteMapping</h3>
			</section>

			<section>
				<section>
					<h2 class="anotation">@PathVariable</h2>
					<p>
						Anotación que indica que un parámetro de método debe estar sujeta a una variable URI
					</p>
					<p>
						http://localhost:8080/api/clientes/1001
					</p>
				</section>
				<section>
					<pre>
						<code class="hljs" data-trim contenteditable style="max-height:600px">
@GetMapping("/clientes/{idCliente}")
public Resource<Cliente> get(@PathVariable(value = "idCliente") Integer idCliente)  {
}
					</code>
				</pre>
				</section>
			</section>

			<section>
				<section>
					<h2 class="anotation">@RequestParam</h2>
					<p>
						Anotación utilizada para acceder a los valores de los parámetros de la solicitud al controller.
					</p>
					<p>
						http://localhost:8080/api/clientes/saldo?param1=algo
					</p>
				</section>
				<section>
					<pre>
						<code class="hljs" data-trim contenteditable style="max-height:600px">
@RequestMapping(method = RequestMethod.GET, value = "algo")
public String getDetails(
@RequestParam(value="param1", required=true) String param1){
...
}
					</code>
				</pre>
				</section>
			</section>
			<section>
				<h3 class="anotation">@Autowired </h3>
				<p>
					Permite resolver la inyección de dependencia.
				</p>
			</section>
			<section>
				<section>
					<h1 class="anotation">@SpringBootApplication</h1>
				</section>
				<section>
					<p>
						Indica que es una aplicación Spring boot, esta se coloca
						en la clase donde esta nuestro main(<b>Metodo de arranque</b> ).
					</p>
				</section>
				<section>
					<pre>
						<code class="hljs" data-trim  style="max-height:600px">
package com.credex;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.data.redis.repository.configuration.EnableRedisRepositories;

@SpringBootApplication
public class CredexApplication {

 public static void main(String[] args) {
    SpringApplication.run(CredexApplication.class, args);
  }
}
					</code>
				</pre>
				</section>
			</section>

			<section>
				<section>
					<h1 class="anotation">@Temporal</h1>
				</section>
				<section>
					<p>
         @Temporal, esta anotación sirve para indicar que se deben persistir solo tipos de datos java.util.Date y java.util.Calendar. Los valores que acepta son:
         <ul>
				   <li> <b>DATE</b> – equivalente a java.sql.Date</li>
           <li><b>TIME</b> – equivalente a java.sql.Time</li>
           <li><b>TIMESTAMP</b> – equivalente a java.sql.Timestamp</li>
				<ul>
					</p>
				</section>
				<section>
					<pre>
						<code class="hljs" data-trim  style="max-height:600px">
class Cliente {

public Cliente(){}

  @Column(name = “fecha_alta”)
  @Temporal(TemporalType.DATE)
  private java.util.Date fechaAlta;

  @Column(name = “ultima_actualizacion”)
  @Temporal(TemporalType.TIMESTAMP)
  private java.util.Date ultimaActualizacion;

}
					</code>
				</pre>
				</section>
			</section>

			<section>
				<section>
					<h1 class="anotation">@Controller</h1>
				</section>
				<section>
					<p>
						La etiqueta @Controller la emplea Spring para escanear las clases y
						 así detectar cuales de estas clases forman los Controllers de nuestra aplicación.
					</p>
				</section>
				<section>
					<pre>
						<code class="hljs" data-trim  style="max-height:600px">
@Controller
@RequestMapping("api/distribuidoras")
public class DistribuidoraController {

@RequestMapping(method = RequestMethod.GET, value = "search/distribuidorasPorNombreOClave", produces = "application/hal+json")
	  public List<Distribuidora> buscarDistribuidora(String input, Integer idPlaza) {
	   return this.distribuidoraApplication.buscarDistribuidoraPorNombreOClave(input, idPlaza);
	}

  @RequestMapping(method = RequestMethod.GET, value = "expediente-legal")
  public BooleanResponse evaluarExpedienteLegal(@RequestParam("idDistribuidora") Integer idDistribuidora) throws BusinessRuleException {
  boolean resultado = this.distribuidoraApplication.esValidoExpedienteLegalDistribuidora(idDistribuidora);
  return  new BooleanResponse(resultado);
	}
}
					</code>
				</pre>
				</section>
			</section>

			<section>
				<section>
					<h1 class="anotation">@JoinColumn</h1>
				</section>
				<section>
					<p>
						Esta anotación sirve en JPA para
						hacer referencia a la columna que es
						clave externa en la tabla y que se encarga de definir la relación
					</p>
				</section>
				<section>
					<pre>
					<code class="hljs" data-trim  style="max-height:600px">

@Entity
@Data
@Table(name = "saldoDeCliente")
public saldoDeCliente {

int id;

@ManyToOne
@JoinColumn(name = "idCliente")
private Cliente Cliente;

}



					</code>
				</pre>
				</section>
			</section>
			<section>
				<section>
					<h1 class="anotation">Anotaciones para relacion de tablas</h1>
				</section>
				<section>
					<p>
						<ul>
						<li><b>@ManyToOne :</b> se encarga de generar una relación de muchos a uno </il>
					  <li><b>@ManyToMany :</b> se encarga de generar una relación de muchos a uno </il>
					  <li><b>@OneToMany :</b> se encarga de generar una relación de muchos a uno </il>
						<li><b>@OneToOne :</b>  se encarga de generar una relación de muchos a uno </il>
           <ul>
					</p>
				</section>
				<section>
          <h2 class="anotation">@ManyToOne</h2>
					<pre>
					<code class="hljs" data-trim  style="max-height:600px">
//Clase SaldoCliente
public void saldoCliente {
	int id;
	int idCliente;
	double monto;

	 @ManyToOne
	 @JoinColumn(name = "idCliente")
	 Cliente cliente;
}

//Clase Cliente
public void Cliente {
  int id;
  String nombre;
  String apellidos;
}
					</code>
				</pre>
				</section>

				<section>
					<h2 class="anotation">@OneToMany</h2>
					<pre>
					<code class="hljs" data-trim  style="max-height:600px">
//Clase SaldoCliente
public void saldoCliente {
	int id;
	int idCliente;
	double monto;
}

//Clase Cliente
public void Cliente {
  int id;
  String nombre;
  String apellidos;

  @ManyToOne
  @JoinColumn(name = "idCliente", referenceColumn = "id")
  List<saldoCliente> cliente;

}
					</code>
				</pre>
				</section>
				<section>
					<h2 class="anotation">@OneToOne</h2>
					<pre>
					<code class="hljs" data-trim  style="max-height:600px">

public void NumeroCelular {
	int id;
	int idCliente;
	String numeroDeCeluar;
}


public void Cliente {
	int id;
	String nombre;
	String apellidos;

	@ManyToOne
	@JoinColumn(name = "idCliente")
	NumeroCelular numeroCelular;

}
					</code>
				</pre>
				</section>
				<section>
					<h2 class="anotation">@ManyToMany</h2>
					<pre>
					<code class="hljs" data-trim  style="max-height:600px">

	public void Materias {
	int id;
	int idAlumnos;
	String numeroDeCeluar;
	}


	public void Alumnos {
	int id;
	String nombre;
	String apellidos;

	@ManyToMany
	@JoinColumn(name = "idCliente")
	List<Materias> materias;

	}
					</code>
				</pre>
				</section>

			</section>

			<section>
				<img src="https://media.giphy.com/media/CObqVWt7S889O/giphy.gif" alt="" height="" />
				<h2>Gracias por su atención!</h2>
			</section>

		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// More info https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			controls: true,
			progress: true,
			history: true,
			center: true,
			// More info https://github.com/hakimel/reveal.js#dependencies
			dependencies: [{
				src: 'lib/js/classList.js',
				condition: function() {
					return !document.body.classList;
				}
			}, {
				src: 'plugin/markdown/marked.js',
				condition: function() {
					return !!document.querySelector('[data-markdown]');
				}
			}, {
				src: 'plugin/markdown/markdown.js',
				condition: function() {
					return !!document.querySelector('[data-markdown]');
				}
			}, {
				src: 'plugin/highlight/highlight.js',
				async: true,
				callback: function() {
					hljs.initHighlightingOnLoad();
				}
			}, {
				src: 'plugin/zoom-js/zoom.js',
				async: true
			}, {
				src: 'plugin/notes/notes.js',
				async: true
			}]
		});
	</script>
</body>

</html>
